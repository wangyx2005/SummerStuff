<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>General &mdash; cloud_pipe 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="cloud_pipe 0.0.1 documentation" href="index.html" />
    <link rel="next" title="How it works" href="howitworks.html" />
    <link rel="prev" title="Welcome to cloud_pipe’s documentation!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="general">
<span id="general"></span><h1>General<a class="headerlink" href="#general" title="Permalink to this headline">¶</a></h1>
<p>This is an automatic setup tool for setting up the data analysis pipeline on the AWS. It provides utility functions to facilitate algorithm developer to build their analytical tools in docker container, published them for others to use and users to use those analytical tools to facilitate their analysis.</p>
<p>The <strong>container_wrapper</strong> folder contains all the utility functions for algorithm developers and <strong>setup</strong> folder is for user to submit their analytical workflows.
Once new algorithm has been added, <strong>algorithms</strong> folder will be created to save the detailed information about the algorithm.</p>
</div>
<div class="section" id="for-algorithm-developers">
<span id="for-algorithm-developers"></span><h1>For Algorithm Developers<a class="headerlink" href="#for-algorithm-developers" title="Permalink to this headline">¶</a></h1>
<p>Have your algorithm containerized, summit a json file describe your algorithm.
For json file template, see <strong>Algorithm_submit_template.json</strong>. For example of json files, see <strong>Algorithm_submit_example.json</strong>
Run the following command to wrap your container to fit the requirement of running using our tool on AWS. By default, a public container image repo hosting the revised will be uploaded to Docker Hub.</p>
<div class="highlight-default"><div class="highlight"><pre><span class="n">python</span> <span class="n">container_wrapper</span><span class="o">.</span><span class="n">py</span> <span class="n">your_json_file</span>
</pre></div>
</div>
</div>
<div class="section" id="for-algorithm-user">
<span id="for-algorithm-user"></span><h1>For Algorithm User<a class="headerlink" href="#for-algorithm-user" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisition-on-aws">
<span id="prerequisition-on-aws"></span><h2>Prerequisition on AWS<a class="headerlink" href="#prerequisition-on-aws" title="Permalink to this headline">¶</a></h2>
<p>Make sure you have full access to <strong>Lambda</strong>, <strong>Simple Queue Services</strong>, <strong>S3</strong>, <strong>EC2 Container Services</strong>, <strong>CloudWatch</strong> and <strong>EC2</strong>.</p>
<p>Additionally, make sure you have the following two roles in your IAM: <strong>EC2ActionsAccess</strong> role with <strong>CloudWatchActionsEC2Access</strong> policy and  <strong>ecsInstanceRole</strong> role with <strong>AmazonEC2ContainerServiceforEC2Role</strong> policy.</p>
<p>The former one allows AWS, more specifically, cloud watch to stop/terminate ec2 instance on your behave. The later one allows ec2 instance register to ecs cluster, poll images for ecr and write logs to CloudWatch log.</p>
<p>These two are will be automatically generated when you first use CloudWatch alarm and ecs if using the aws console. Here is a link about how to sent these up.
add &#8220;swf:*&#8221; permission to your account</p>
<p>Lastly, create a role called <strong>lambda_exec_role</strong> with the following policy:</p>
<div class="highlight-default"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;logs:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;cloudwatch:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lambda:invokeFunction&quot;</span><span class="p">,</span>
                <span class="s2">&quot;sqs:SendMessage&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:Describe*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:StartInsatnces&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ec2:RunInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;iam:PassRole&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ecs:StartTask&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ecs:ListContainerInstances&quot;</span><span class="p">,</span>
                <span class="s2">&quot;ecs:DescribeContainerInstances&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;arn:aws:logs:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:lambda:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:sqs:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:ec2:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:cloudwatch:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;arn:aws:ecs:*:*:*&quot;</span><span class="p">,</span>
                <span class="s2">&quot;*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can added manually on aws console or run the following command.</p>
<div class="highlight-default"><div class="highlight"><pre>
</pre></div>
</div>
</div>
</div>
<div class="section" id="todo-list">
<span id="todo-list"></span><h1>TODO list:<a class="headerlink" href="#todo-list" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li>one to all / all to one algorithm setup</li>
<li>workflow language</li>
<li>optimize usage of lambda function</li>
<li>add support to upload container images to places other than Docker hub</li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">General</a></li>
<li><a class="reference internal" href="#for-algorithm-developers">For Algorithm Developers</a></li>
<li><a class="reference internal" href="#for-algorithm-user">For Algorithm User</a><ul>
<li><a class="reference internal" href="#prerequisition-on-aws">Prerequisition on AWS</a></li>
</ul>
</li>
<li><a class="reference internal" href="#todo-list">TODO list:</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to cloud_pipe&#8217;s documentation!</a></li>
      <li>Next: <a href="howitworks.html" title="next chapter">How it works</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/quickstart.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Yuxing Wang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="_sources/quickstart.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>